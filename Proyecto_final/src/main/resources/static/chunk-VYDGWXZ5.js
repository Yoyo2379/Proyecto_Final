import{a as J,b as K,c as U,d as W,e as X,f as Y,g as Z,h as tt,i as et,j as it,k as ot,l as nt,n as x,o as at,p as M,q as rt,r as lt,s as mt,t as ct,u as st,v as dt,w as _t}from"./chunk-UU6YQF4W.js";import{a as G}from"./chunk-KAZCH7JP.js";import{a as Q,b as B}from"./chunk-36AWM7YG.js";import"./chunk-QN3EYHTV.js";import{m as pt}from"./chunk-KCIO37WG.js";import"./chunk-5Z4GIFAT.js";import{a as H,b as O,c as z,d as $,e as F}from"./chunk-QXNWF3HH.js";import{e as I,g as R,h as k,ma as N,oa as A,pa as q,r as V}from"./chunk-OLD2AYRY.js";import{Cb as _,Db as f,Fb as P,Jb as u,Kb as p,Ob as j,Pa as m,Pb as E,Qb as y,Y as h,Yb as r,Zb as v,_b as D,ba as g,ca as C,cb as w,fc as b,gc as L,hc as T,ib as c,vb as s,wb as o,xb as n,yb as S}from"./chunk-YGIBANMM.js";import"./chunk-7CGTOI24.js";var ut=()=>[5,10,25,50];function gt(e,t){e&1&&S(0,"app-loading")}function Ct(e,t){e&1&&(o(0,"th",16),r(1,"Nombre"),n())}function ht(e,t){if(e&1&&(o(0,"td",17),r(1),n()),e&2){let i=t.$implicit;m(),v(i.name)}}function St(e,t){e&1&&(o(0,"th",18),r(1,"Descripci\xF3n"),n())}function vt(e,t){if(e&1&&(o(0,"td",17),r(1),n()),e&2){let i=t.$implicit;m(),v(i.description)}}function xt(e,t){e&1&&(o(0,"th",16),r(1,"Fecha Inicio"),n())}function Mt(e,t){if(e&1&&(o(0,"td",17),r(1),L(2,"date"),n()),e&2){let i=t.$implicit;m(),v(T(2,1,i.startDate,"dd/MM/yyyy"))}}function Pt(e,t){e&1&&(o(0,"th",16),r(1,"Estado"),n())}function jt(e,t){if(e&1&&(o(0,"td",17)(1,"mat-chip",19),r(2),n()()),e&2){let i=t.$implicit,a=p(2);m(),s("color",a.getStatusColor(i.status)),m(),D(" ",a.getStatusLabel(i.status)," ")}}function Et(e,t){e&1&&(o(0,"th",18),r(1,"Acciones"),n())}function yt(e,t){if(e&1){let i=P();o(0,"td",17)(1,"button",20),u("click",function(){let l=g(i).$implicit,d=p(2);return C(d.onEdit(l))}),o(2,"mat-icon"),r(3,"edit"),n()(),o(4,"button",21),u("click",function(){let l=g(i).$implicit,d=p(2);return C(d.onDelete(l))}),o(5,"mat-icon"),r(6,"delete"),n()()()}}function wt(e,t){e&1&&S(0,"tr",22)}function Dt(e,t){e&1&&S(0,"tr",23)}function bt(e,t){if(e&1){let i=P();o(0,"div",3)(1,"table",4),u("matSortChange",function(l){g(i);let d=p();return C(d.onSortChange(l))}),_(2,5),c(3,Ct,2,0,"th",6)(4,ht,2,1,"td",7),f(),_(5,8),c(6,St,2,0,"th",9)(7,vt,2,1,"td",7),f(),_(8,10),c(9,xt,2,0,"th",6)(10,Mt,3,4,"td",7),f(),_(11,11),c(12,Pt,2,0,"th",6)(13,jt,3,2,"td",7),f(),_(14,12),c(15,Et,2,0,"th",9)(16,yt,7,0,"td",7),f(),c(17,wt,1,0,"tr",13)(18,Dt,1,0,"tr",14),n(),o(19,"mat-paginator",15),u("page",function(l){g(i);let d=p();return C(d.onPageChange(l))}),n()()}if(e&2){let i=p();m(),s("dataSource",i.dataSource),m(16),s("matHeaderRowDef",i.displayedColumns),m(),s("matRowDefColumns",i.displayedColumns),m(),s("length",i.totalElements)("pageSize",i.pageSize)("pageSizeOptions",b(6,ut))}}var ft=class e{projectService=h(pt);router=h(V);dialog=h(mt);displayedColumns=["name","description","startDate","status","actions"];dataSource=new nt;totalElements=0;pageSize=10;pageIndex=0;sortField="name";sortDirection="asc";loading=!1;paginator;sort;ngOnInit(){this.loadProjects()}loadProjects(){this.loading=!0;let t=`${this.sortField},${this.sortDirection}`;this.projectService.getAll(this.pageIndex,this.pageSize,t).subscribe({next:i=>{this.dataSource.data=i.content,this.totalElements=i.totalElements,this.loading=!1},error:()=>{this.loading=!1}})}onPageChange(t){this.pageIndex=t.pageIndex,this.pageSize=t.pageSize,this.loadProjects()}onSortChange(t){this.sortField=t.active||"name",this.sortDirection=t.direction||"asc",this.pageIndex=0,this.loadProjects()}onCreate(){this.router.navigate(["/projects/new"])}onEdit(t){this.router.navigate(["/projects",t.id,"edit"])}onDelete(t){this.dialog.open(_t,{data:{title:"Eliminar Proyecto",message:`\xBFEst\xE1 seguro de eliminar el proyecto "${t.name}"?`,confirmText:"Eliminar"}}).afterClosed().subscribe(a=>{a&&this.projectService.delete(t.id).subscribe(()=>{this.loadProjects()})})}getStatusColor(t){return{active:"primary",completed:"accent",on_hold:"warn"}[t]||"primary"}getStatusLabel(t){return{active:"Activo",completed:"Completado",on_hold:"En Espera"}[t]||t}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=w({type:e,selectors:[["app-project-list"]],viewQuery:function(i,a){if(i&1&&(j(x,5),j(M,5)),i&2){let l;E(l=y())&&(a.paginator=l.first),E(l=y())&&(a.sort=l.first)}},decls:11,vars:2,consts:[["mat-raised-button","","color","primary",3,"click"],[4,"ngIf"],["class","table-container",4,"ngIf"],[1,"table-container"],["mat-table","","matSort","",3,"matSortChange","dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","startDate"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"page","length","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[3,"color"],["mat-icon-button","","matTooltip","Editar",3,"click"],["mat-icon-button","","color","warn","matTooltip","Eliminar",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,a){i&1&&(o(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),r(3,"Proyectos"),n(),o(4,"button",0),u("click",function(){return a.onCreate()}),o(5,"mat-icon"),r(6,"add"),n(),r(7," Nuevo Proyecto "),n()(),o(8,"mat-card-content"),c(9,gt,1,0,"app-loading",1)(10,bt,20,7,"div",2),n()()),i&2&&(m(9),s("ngIf",a.loading),m(),s("ngIf",!a.loading))},dependencies:[k,I,ot,J,U,Z,W,K,tt,X,Y,et,it,at,x,lt,M,rt,q,A,N,B,Q,F,H,z,$,O,ct,dt,st,G,R],styles:["mat-card[_ngcontent-%COMP%]{margin:1rem}mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.table-container[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{width:100%}mat-paginator[_ngcontent-%COMP%]{margin-top:1rem}"]})};export{ft as ProjectListComponent};
